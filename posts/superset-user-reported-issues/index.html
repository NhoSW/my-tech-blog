<!doctype html><html lang=ko dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="ko"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=theme-color><title>Superset 사용자 제보 이슈 6건 대응기 &#183; nanta - 데이터 엔지니어링</title><meta name=title content="Superset 사용자 제보 이슈 6건 대응기 &#183; nanta - 데이터 엔지니어링"><meta name=description content="데이터 거버넌스팀에서 Superset 사용 중 발견한 이슈 6건을 대응했다. Slack 스크린샷 확장자 누락부터 CSV 다운로드 500 에러까지 난이도가 다양했다. 가장 까다로웠던 건 50만 행 이상 CSV 다운로드 시 PostgreSQL idle_in_transaction_session_timeout이 메타데이터 DB 커넥션을 끊어버리는 문제였다. 에러가 발생하는 커넥션과 원인이 되는 커넥션이 달라서, Redshift만 보고 있었으면 절대 못 찾았을 이슈다."><meta name=keywords content="superset,csv,encoding,postgresql,troubleshooting,"><link rel=canonical href=https://nanta-data.dev/posts/superset-user-reported-issues/><meta name=author content="nanta"><link href=https://github.com/NhoSW rel=me><meta property="og:url" content="https://nanta-data.dev/posts/superset-user-reported-issues/"><meta property="og:site_name" content="nanta - 데이터 엔지니어링"><meta property="og:title" content="Superset 사용자 제보 이슈 6건 대응기"><meta property="og:description" content="데이터 거버넌스팀에서 Superset 사용 중 발견한 이슈 6건을 대응했다. Slack 스크린샷 확장자 누락부터 CSV 다운로드 500 에러까지 난이도가 다양했다. 가장 까다로웠던 건 50만 행 이상 CSV 다운로드 시 PostgreSQL idle_in_transaction_session_timeout이 메타데이터 DB 커넥션을 끊어버리는 문제였다. 에러가 발생하는 커넥션과 원인이 되는 커넥션이 달라서, Redshift만 보고 있었으면 절대 못 찾았을 이슈다."><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-27T00:00:00+00:00"><meta property="article:modified_time" content="2026-02-27T00:00:00+00:00"><meta property="article:tag" content="Superset"><meta property="article:tag" content="Csv"><meta property="article:tag" content="Encoding"><meta property="article:tag" content="Postgresql"><meta property="article:tag" content="Troubleshooting"><meta name=twitter:card content="summary"><meta name=twitter:title content="Superset 사용자 제보 이슈 6건 대응기"><meta name=twitter:description content="데이터 거버넌스팀에서 Superset 사용 중 발견한 이슈 6건을 대응했다. Slack 스크린샷 확장자 누락부터 CSV 다운로드 500 에러까지 난이도가 다양했다. 가장 까다로웠던 건 50만 행 이상 CSV 다운로드 시 PostgreSQL idle_in_transaction_session_timeout이 메타데이터 DB 커넥션을 끊어버리는 문제였다. 에러가 발생하는 커넥션과 원인이 되는 커넥션이 달라서, Redshift만 보고 있었으면 절대 못 찾았을 이슈다."><link type=text/css rel=stylesheet href=/css/main.bundle.min.c14e86e0d9a09802d254d2a15c05847ae65bfc2e98c2166fabc67369d2d7f2eae6c1da03bbba58cfd41a4af802147c75ce9fdc11dd724ac627ab2903942cbb79.css integrity="sha512-wU6G4NmgmALSVNKhXAWEeuZb/C6YwhZvq8ZzadLX8urmwdoDu7pYz9QaSvgCFHx1zp/cEd1ySsYnqykDlCy7eQ=="><script type=text/javascript src=/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js integrity="sha512-b0EXSzoFtoCCD+CMrb+l+3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script><script src=/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7+kfJ6kKCJxQGC+8wm+Bz9JucDjDTGNew=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.bdda7dece6cbaf08deef7d254f7f842f3261c2524d247905127c9a20decc03f1011a2950048464c79272c1ce0705a49a41147f39f2b95163bb71d404b33263ef.js integrity="sha512-vdp97ObLrwje730lT3+ELzJhwlJNJHkFEnyaIN7MA/EBGilQBIRkx5Jywc4HBaSaQRR/OfK5UWO7cdQEszJj7w==" data-copy=복사 data-copied=복사되었습니다></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"글 목록","name":"Superset 사용자 제보 이슈 6건 대응기","headline":"Superset 사용자 제보 이슈 6건 대응기","inLanguage":"ko","url":"https://nanta-data.dev/posts/superset-user-reported-issues/","author":{"@type":"Person","name":"nanta"},"copyrightYear":"2026","dateCreated":"2026-02-27T00:00:00\u002b00:00","datePublished":"2026-02-27T00:00:00\u002b00:00","dateModified":"2026-02-27T00:00:00\u002b00:00","keywords":["superset","csv","encoding","postgresql","troubleshooting"],"mainEntityOfPage":"true","wordCount":"1451"}]</script><link rel=preconnect href=https://cdn.jsdelivr.net crossorigin><link href=https://cdn.jsdelivr.net/npm/geist@1.3.1/dist/fonts/geist-sans/style.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/geist@1.3.1/dist/fonts/geist-mono/style.min.css rel=stylesheet><meta name=google-adsense-account content="ca-pub-9172052068678434"></head><body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral bf-scrollbar"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
본문으로 건너뛰기</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 z-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl bg-neutral/25 dark:bg-neutral-800/25"></div><div class="relative m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32"><div class="main-menu flex items-center w-full gap-2 p-1 pl-0"><a href=/ class="text-base font-medium truncate min-w-0 shrink">nanta - 데이터 엔지니어링</a><div class="flex items-center ms-auto"><div class="hidden md:flex"><nav class="flex items-center gap-x-5 h-12"><a href=/posts/ class="flex items-center bf-icon-color-hover" aria-label="글 목록" title="글 목록"><span class="text-base font-medium break-normal">글 목록
</span></a><a href=/categories/ class="flex items-center bf-icon-color-hover" aria-label=카테고리 title=Categories><span class="text-base font-medium break-normal">카테고리
</span></a><a href=/tags/ class="flex items-center bf-icon-color-hover" aria-label=태그 title=Tags><span class="text-base font-medium break-normal">태그
</span></a><a href=/about/ class="flex items-center bf-icon-color-hover" aria-label=소개 title=소개><span class="text-base font-medium break-normal">소개</span></a><div class="translation nested-menu"><button class="cursor-pointer flex items-center">
<span class=me-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span>
</span><span class="text-sm font-medium bf-icon-color-hover" title="Superset 사용자 제보 이슈 6건 대응기">KO</span></button><ul class=menuhide><li class="rounded-xl backdrop-blur shadow-2xl p-2 flex flex-col gap-1"><a href=/posts/superset-user-reported-issues/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Superset 사용자 제보 이슈 6건 대응기">한국어
</span></a><a href=/en/posts/superset-user-reported-issues/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Superset: Resolving Six User-Reported Issues">English</span></a></li></ul></div><button id=search-button aria-label=Search class="text-base bf-icon-color-hover" title="검색하기 (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base bf-icon-color-hover"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav></div><div class="flex md:hidden"><div class="flex items-center h-14 gap-4"><button id=search-button-mobile aria-label=Search class="flex items-center justify-center bf-icon-color-hover" title="검색하기 (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile type=button aria-label="Dark mode switcher" class="flex items-center justify-center text-neutral-900 hover:text-primary-600 dark:text-neutral-200 dark:hover:text-primary-400"><div class=dark:hidden><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="hidden dark:block"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button>
<input type=checkbox id=mobile-menu-toggle autocomplete=off class="hidden peer">
<label for=mobile-menu-toggle class="flex items-center justify-center cursor-pointer bf-icon-color-hover"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></label><div role=dialog aria-modal=true style=scrollbar-gutter:stable class="fixed inset-0 z-50 invisible overflow-y-auto px-6 py-20 opacity-0 transition-[opacity,visibility] duration-300 peer-checked:visible peer-checked:opacity-100 bg-neutral-50/97 dark:bg-neutral-900/99
bf-scrollbar"><label for=mobile-menu-toggle class="fixed end-8 top-5 flex items-center justify-center z-50 h-12 w-12 cursor-pointer select-none rounded-full bf-icon-color-hover border bf-border-color bf-border-color-hover bg-neutral-50 dark:bg-neutral-900"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></label><nav class="mx-auto max-w-md space-y-6"><div class=px-2><a href=/posts/ aria-label="글 목록" class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title="글 목록" class="text-2xl font-bold tracking-tight">글 목록</span></a></div><div class=px-2><a href=/categories/ aria-label=카테고리 class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Categories class="text-2xl font-bold tracking-tight">카테고리</span></a></div><div class=px-2><a href=/tags/ aria-label=태그 class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Tags class="text-2xl font-bold tracking-tight">태그</span></a></div><div class=px-2><a href=/about/ aria-label=소개 class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=소개 class="text-2xl font-bold tracking-tight">소개</span></a></div><div class="flex flex-wrap items-center [&_span]:text-2xl [&_.translation_button_.icon]:text-4xl! [&_.translation_button_span]:text-base! [&_.translation_.menuhide_span]:text-sm! gap-x-6 ps-2 mt-8 pt-8 border-t bf-border-color"><div class="translation nested-menu"><button class="cursor-pointer flex items-center">
<span class=me-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span>
</span><span class="text-sm font-medium bf-icon-color-hover" title="Superset 사용자 제보 이슈 6건 대응기">KO</span></button><ul class=menuhide><li class="rounded-xl backdrop-blur shadow-2xl p-2 flex flex-col gap-1"><a href=/posts/superset-user-reported-issues/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Superset 사용자 제보 이슈 6건 대응기">한국어
</span></a><a href=/en/posts/superset-user-reported-issues/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Superset: Resolving Six User-Reported Issues">English</span></a></li></ul></div></div></nav></div></div></div></div></div></div></div><script type=text/javascript src=/js/background-blur.min.605b3b942818f0ab5a717ae446135ec46b8ee5a2ad12ae56fb90dc2a76ce30c388f9fec8bcc18db15bd47e3fa8a09d779fa12aa9c184cf614a315bc72c6c163d.js integrity="sha512-YFs7lCgY8KtacXrkRhNexGuO5aKtEq5W+5DcKnbOMMOI+f7IvMGNsVvUfj+ooJ13n6EqqcGEz2FKMVvHLGwWPQ==" data-blur-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>nanta - 데이터 엔지니어링</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>글 목록</a><span class="px-1 text-primary-500">/</span></li><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/superset-user-reported-issues/>Superset 사용자 제보 이슈 6건 대응기</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Superset 사용자 제보 이슈 6건 대응기</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2026-02-27T00:00:00+00:00>2026년 2월 27일</time><span class="px-2 text-primary-500">&#183;</span><span title="읽는 시간">7 분</span></div></div><div class="flex author"><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">작성자</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">nanta</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Apache Kafka, Airflow, Trino, StarRocks 등 데이터 엔지니어링과 모던 데이터 인프라에 대한 실무 경험을 공유하는 블로그입니다.</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/NhoSW target=_blank aria-label=Github title=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ms-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs"><div class="toc ps-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain bf-scrollbar rounded-lg -ms-5 ps-5 pe-2 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">목차</summary><div class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#1-slack-차트-스크린샷-확장자-누락>1. Slack 차트 스크린샷 확장자 누락</a></li><li><a href=#2-대시보드-자동-새로고침-초기화>2. 대시보드 자동 새로고침 초기화</a></li><li><a href=#3-sqllab-데이터셋-덮어쓰기-버그>3. SqlLab 데이터셋 덮어쓰기 버그</a></li><li><a href=#4-윈도우-환경-csv-한글-깨짐>4. 윈도우 환경 CSV 한글 깨짐</a></li><li><a href=#5-쿼리-결과-행-제한-10만--100만>5. 쿼리 결과 행 제한 10만 → 100만</a></li><li><a href=#6-csv-다운로드-500-에러--가장-까다로웠던-이슈>6. CSV 다운로드 500 에러 — 가장 까다로웠던 이슈</a><ul><li><a href=#에러-로그-추적>에러 로그 추적</a></li><li><a href=#원인-분석>원인 분석</a></li><li><a href=#대응>대응</a></li></ul></li><li><a href=#기타-helm-차트-db-init-job-arm-노드-이슈>기타: Helm 차트 db-init Job ARM 노드 이슈</a></li><li><a href=#배운-것>배운 것</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">목차</summary><div class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#1-slack-차트-스크린샷-확장자-누락>1. Slack 차트 스크린샷 확장자 누락</a></li><li><a href=#2-대시보드-자동-새로고침-초기화>2. 대시보드 자동 새로고침 초기화</a></li><li><a href=#3-sqllab-데이터셋-덮어쓰기-버그>3. SqlLab 데이터셋 덮어쓰기 버그</a></li><li><a href=#4-윈도우-환경-csv-한글-깨짐>4. 윈도우 환경 CSV 한글 깨짐</a></li><li><a href=#5-쿼리-결과-행-제한-10만--100만>5. 쿼리 결과 행 제한 10만 → 100만</a></li><li><a href=#6-csv-다운로드-500-에러--가장-까다로웠던-이슈>6. CSV 다운로드 500 에러 — 가장 까다로웠던 이슈</a><ul><li><a href=#에러-로그-추적>에러 로그 추적</a></li><li><a href=#원인-분석>원인 분석</a></li><li><a href=#대응>대응</a></li></ul></li><li><a href=#기타-helm-차트-db-init-job-arm-노드-이슈>기타: Helm 차트 db-init Job ARM 노드 이슈</a></li><li><a href=#배운-것>배운 것</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><p>데이터 거버넌스팀에서 Superset을 적극적으로 활용하시면서 발견한 이슈 6건을 공유해주셨다. 직접 사용하면서 제보해주신 덕분에 우리가 내부 테스트에서는 놓쳤을 문제들을 잡을 수 있었다.</p><p>이슈의 난이도는 다양했다. 코드 한 줄 수정이면 해결되는 것도 있었고, Superset 서버 로그와 RDS 에러 로그를 교차로 추적해서 겨우 원인을 찾은 것도 있었다. 이슈별로 원인과 대응을 정리한다.</p><hr><h2 class="relative group">1. Slack 차트 스크린샷 확장자 누락<div id=1-slack-차트-스크린샷-확장자-누락 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#1-slack-%ec%b0%a8%ed%8a%b8-%ec%8a%a4%ed%81%ac%eb%a6%b0%ec%83%b7-%ed%99%95%ec%9e%a5%ec%9e%90-%eb%88%84%eb%9d%bd aria-label=앵커>#</a></span></h2><p><strong>제보 내용:</strong> Superset에서 Slack으로 피딩되는 차트 스크린샷 파일을 다운로드하면 확장자가 없다. 파일을 열려고 하면 OS가 이미지 포맷을 인식하지 못해서 별도로 확장자를 붙여줘야 한다.</p><p><strong>원인:</strong> Superset이 Slack API의 <code>files.upload</code>를 호출할 때 <code>filename</code> 파라미터에 확장자를 포함하지 않고 있었다. Slack은 업로드 시 전달받은 파일명을 그대로 사용한다. 파일의 실제 내용은 PNG 이미지인데, 파일명이 <code>chart_screenshot</code>처럼 확장자 없이 전달되면 Slack에서도 확장자 없는 파일명으로 저장된다.</p><p>macOS에서는 파일 내용을 기반으로 타입을 추론하는 경우가 많아서 확장자가 없어도 이미지로 열리는 경우가 있다. 하지만 Windows에서는 확장자에 의존하기 때문에 이미지로 인식하지 못한다. 제보해주신 분이 Windows를 사용하고 계셔서 이 문제를 발견하신 것이다.</p><p><strong>대응:</strong> Slack API 호출 시 파일명에 <code>.png</code> 확장자를 포함하도록 코드를 수정했다.</p><hr><h2 class="relative group">2. 대시보드 자동 새로고침 초기화<div id=2-대시보드-자동-새로고침-초기화 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#2-%eb%8c%80%ec%8b%9c%eb%b3%b4%eb%93%9c-%ec%9e%90%eb%8f%99-%ec%83%88%eb%a1%9c%ea%b3%a0%ec%b9%a8-%ec%b4%88%ea%b8%b0%ed%99%94 aria-label=앵커>#</a></span></h2><p><strong>제보 내용:</strong> 대시보드 화면에서 auto-refresh interval을 설정했는데, 브라우저를 닫고 다시 접속하면 설정이 초기화돼 있다.</p><p><strong>원인:</strong> 대시보드 우측 상단의 auto-refresh 메뉴는 현재 브라우저 세션에만 적용되는 설정이다. Superset의 설계상 이 값은 서버에 저장되지 않는다. 브라우저 탭을 닫으면 사라진다.</p><p>혼란의 원인은 Superset에 같은 목적의 설정이 두 군데 있기 때문이다.</p><ul><li><strong>세션 레벨 설정</strong>: 대시보드 우측 상단의 auto-refresh 드롭다운. 현재 세션에만 적용되고, 브라우저를 닫으면 초기화된다.</li><li><strong>대시보드 레벨 설정</strong>: 대시보드 편집 모드에서 설정하는 리프레시 인터벌. 대시보드 메타데이터에 저장되므로, 누가 접속하든 동일하게 적용된다.</li></ul><p>제보자분은 세션 레벨 설정을 사용하고 계셨다. 대시보드 레벨 설정의 존재 자체를 모르셨는데, 이건 UX 설계의 문제라고 생각한다. 같은 목적의 설정이 스코프만 다르게 두 곳에 있으면 사용자 입장에서는 혼란스러울 수밖에 없다.</p><p><strong>대응:</strong> 대시보드 편집 모드에서 리프레시 인터벌을 설정하는 방법을 안내했다.</p><hr><h2 class="relative group">3. SqlLab 데이터셋 덮어쓰기 버그<div id=3-sqllab-데이터셋-덮어쓰기-버그 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#3-sqllab-%eb%8d%b0%ec%9d%b4%ed%84%b0%ec%85%8b-%eb%8d%ae%ec%96%b4%ec%93%b0%ea%b8%b0-%eb%b2%84%ea%b7%b8 aria-label=앵커>#</a></span></h2><p><strong>제보 내용:</strong> SqlLab에서 쿼리 결과를 데이터셋으로 저장할 때 &ldquo;overwrite existing dataset&rdquo; 옵션을 선택하면, 기존 데이터셋 목록이 제대로 표시되지 않는다. 목록이 빈 상태거나, 검색이 동작하지 않는다.</p><p><strong>원인:</strong> Superset 업스트림의 알려진 버그였다. 데이터셋 목록을 불러오는 API 엔드포인트에서 필터링 로직이 잘못 동작하고 있었다.</p><p>이 이슈는 제보를 받고 Superset의 GitHub Issues를 먼저 검색했다. 동일한 이슈가 이미 보고되어 있었고, 픽스 PR도 머지된 상태였다. 다만 우리가 운영하는 Superset 버전에는 아직 반영되지 않은 커밋이었다.</p><p><strong>대응:</strong> 해당 픽스 커밋을 우리 포크 레포에 체리피킹해서 적용했다.</p><hr><h2 class="relative group">4. 윈도우 환경 CSV 한글 깨짐<div id=4-윈도우-환경-csv-한글-깨짐 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#4-%ec%9c%88%eb%8f%84%ec%9a%b0-%ed%99%98%ea%b2%bd-csv-%ed%95%9c%ea%b8%80-%ea%b9%a8%ec%a7%90 aria-label=앵커>#</a></span></h2><p><strong>제보 내용:</strong> Superset에서 다운로드한 CSV 파일을 윈도우 환경의 Excel에서 열면 한글이 전부 깨져서 보인다. 메모장에서 열면 정상인데, Excel에서만 깨진다.</p><p><strong>원인:</strong> Superset이 CSV를 표준 UTF-8로 인코딩해서 내보내고 있었다. 정상적인 UTF-8 파일이고, 메모장이나 대부분의 텍스트 에디터에서는 문제없이 열린다.</p><p>문제는 Microsoft Excel이다. Excel은 CSV 파일을 열 때 파일 앞부분에 BOM(Byte Order Mark)이 있는지를 확인한다. BOM은 파일의 처음 3바이트(<code>EF BB BF</code>)에 위치하는 특수 마커로, &ldquo;이 파일은 UTF-8입니다"라고 알려주는 역할을 한다. BOM이 없으면 Excel은 시스템 기본 인코딩으로 해석하는데, 한국어 Windows의 기본 인코딩은 EUC-KR(CP949)이다.</p><p>UTF-8로 인코딩된 한글을 EUC-KR로 해석하면 깨진다. 예를 들어 &ldquo;서울"이라는 문자열은 UTF-8에서 <code>EC 84 9C EC 9A B8</code>인데, 이걸 EUC-KR로 해석하면 전혀 다른 문자가 된다.</p><p>macOS나 Linux에서는 시스템 기본 인코딩이 UTF-8이기 때문에 BOM이 없어도 문제가 되지 않는다. 하지만 윈도우 Excel 사용자가 많은 환경에서는 BOM을 반드시 포함해야 한다.</p><p><strong>대응:</strong> CSV 내보내기 인코딩을 <code>utf-8</code>에서 <code>utf-8-sig</code>로 변경했다. <code>utf-8-sig</code>는 Python 표준 라이브러리에서 제공하는 인코딩 변형으로, 파일 시작 부분에 BOM 3바이트(<code>EF BB BF</code>)를 자동으로 삽입한다. 코드 변경은 인코딩 파라미터 하나를 바꾸는 것뿐이다.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Before</span>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>to_csv</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># After</span>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>to_csv</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8-sig&#39;</span><span class=p>)</span></span></span></code></pre></div></div><p>BOM이 포함되면 Excel이 파일을 UTF-8로 올바르게 인식해서 한글이 정상 표시된다.</p><p>참고로 BOM은 UTF-8 표준에서 선택사항이고, BOM이 있는 UTF-8 파일을 일부 유닉스 도구에서 비정상으로 취급하는 경우가 있다. 하지만 CSV의 주 소비처가 Excel인 환경에서는 BOM을 넣는 게 맞다.</p><hr><h2 class="relative group">5. 쿼리 결과 행 제한 10만 → 100만<div id=5-쿼리-결과-행-제한-10만--100만 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#5-%ec%bf%bc%eb%a6%ac-%ea%b2%b0%ea%b3%bc-%ed%96%89-%ec%a0%9c%ed%95%9c-10%eb%a7%8c--100%eb%a7%8c aria-label=앵커>#</a></span></h2><p><strong>제보 내용:</strong> Superset에서 쿼리 결과가 10만 행으로 제한되어 있다. 분석 업무상 100만 행까지 출력되면 좋겠다.</p><p><strong>대응:</strong> Superset의 <code>ROW_LIMIT</code> 관련 설정값을 변경해서 최대 100만 행까지 응답하도록 조정했다.</p><p>단순한 설정 변경이지만, 행 제한을 무조건 올리는 것이 항상 좋은 건 아니다. 행 수가 늘어나면 Superset 웹서버의 메모리 사용량과 응답 시간이 비례해서 증가한다. 100만 행이면 컬럼 수와 데이터 타입에 따라 수 GB의 메모리를 점유할 수 있다.</p><p>우리 환경에서는 Superset 웹서버의 메모리 리소스에 여유가 있어서 100만 행으로 올렸지만, 이건 운영 환경의 리소스 상황을 보면서 결정해야 하는 설정이다. 만약 메모리 OOM이 발생하면 다시 낮출 수도 있다.</p><p>그리고 행 제한을 올리면 다음 이슈(6번)처럼 대용량 CSV 다운로드에서 문제가 생길 여지도 커진다. 관련이 깊은 이슈라서 함께 대응했다.</p><hr><h2 class="relative group">6. CSV 다운로드 500 에러 — 가장 까다로웠던 이슈<div id=6-csv-다운로드-500-에러--가장-까다로웠던-이슈 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#6-csv-%eb%8b%a4%ec%9a%b4%eb%a1%9c%eb%93%9c-500-%ec%97%90%eb%9f%ac--%ea%b0%80%ec%9e%a5-%ea%b9%8c%eb%8b%a4%eb%a1%9c%ec%9b%a0%eb%8d%98-%ec%9d%b4%ec%8a%88 aria-label=앵커>#</a></span></h2><p><strong>제보 내용:</strong> Superset에서 50만 행 이상의 쿼리 결과를 CSV로 다운로드하면 약 1분 뒤에 500 에러가 발생한다. 20만 행까지는 문제없이 다운로드된다.</p><p>이 이슈는 제보 내용 자체가 디버깅의 실마리를 담고 있었다. &ldquo;20만 행은 되고 50만 행은 안 된다"는 건 데이터 크기의 문제가 아니라 처리 시간의 문제라는 뜻이다. 어딘가에 시간 기반 제한이 걸려 있다.</p><h3 class="relative group">에러 로그 추적<div id=에러-로그-추적 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%ec%97%90%eb%9f%ac-%eb%a1%9c%ea%b7%b8-%ec%b6%94%ec%a0%81 aria-label=앵커>#</a></span></h3><p>먼저 Superset 서버 로그에서 해당 시점의 에러를 확인했다.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>psycopg2.OperationalError: SSL connection has been closed unexpectedly</span></span></code></pre></div></div><p>처음 이 에러를 봤을 때는 Redshift 커넥션이 끊긴 것으로 생각했다. Superset에서 CSV를 다운로드하려면 Redshift에서 데이터를 가져와야 하고, 50만 행이면 Redshift 쪽에서 타임아웃이 걸렸을 수 있다고 추정했다.</p><p>하지만 에러 로그를 자세히 보니, 이 <code>psycopg2</code> 에러는 Redshift 커넥션이 아니었다. Superset의 메타데이터 데이터베이스인 Aurora PostgreSQL 커넥션에서 발생한 에러였다. Redshift는 <code>sqlalchemy-redshift</code> 드라이버를 사용하고, 메타데이터 DB는 <code>psycopg2</code>를 사용한다.</p><p>왜 데이터를 가져오는 게 아닌 메타데이터 DB에서 에러가 날까?</p><h3 class="relative group">원인 분석<div id=원인-분석 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%ec%9b%90%ec%9d%b8-%eb%b6%84%ec%84%9d aria-label=앵커>#</a></span></h3><p>CSV 다운로드 흐름을 코드 레벨에서 추적해보면 이렇다:</p><ol><li>사용자가 CSV 다운로드 요청</li><li>Superset이 메타데이터 DB(Aurora PostgreSQL)에 트랜잭션을 열고, 사용자의 다운로드 권한을 확인한다</li><li>권한 확인이 통과되면, 같은 요청 컨텍스트 안에서 Redshift로부터 실제 데이터를 가져오기 시작한다</li><li>50만 행 이상이면 Redshift에서 데이터를 가져오는 데 1분 이상 소요된다</li><li>이 동안 2번에서 열린 메타데이터 DB 쪽 트랜잭션은 아무 쿼리도 실행하지 않은 채 열린 상태로 idle 대기한다</li><li>Aurora RDS의 <code>idle_in_transaction_session_timeout</code> 설정이 60,000ms(1분)로 되어 있다</li><li>idle 상태의 트랜잭션이 1분을 초과하면 PostgreSQL이 해당 커넥션을 강제 종료한다</li><li>메타데이터 DB 커넥션이 끊기면서 Superset 서버가 500 에러를 반환한다</li></ol><p>핵심은 5번이다. 권한 체크는 이미 끝났는데, 트랜잭션이 닫히지 않은 채로 열려 있었다. Superset의 SQLAlchemy 세션 관리에서 요청이 완료될 때까지 트랜잭션을 유지하는 구조 때문이다.</p><p>해당 시점의 Aurora RDS 에러 로그를 확인하니 이를 뒷받침하는 로그가 있었다.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>master@superset:[17810]:FATAL: terminating connection due to idle-in-transaction timeout</span></span></code></pre></div></div><p>RDS 파라미터 그룹에서 <code>idle_in_transaction_session_timeout</code> 값을 확인하니 60,000ms(1분)로 설정되어 있었다. 정확히 제보 내용과 맞는다. 20만 행은 1분 안에 완료되고, 50만 행은 1분을 넘기니까 실패하는 것이다.</p><h3 class="relative group">대응<div id=대응 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%eb%8c%80%ec%9d%91 aria-label=앵커>#</a></span></h3><p>RDS 파라미터 그룹에서 <code>idle_in_transaction_session_timeout</code>을 60,000ms(1분)에서 600,000ms(10분)로 변경을 요청했다. Superset 웹서버의 다른 타임아웃 설정들 — ALB 타임아웃, gunicorn 워커 타임아웃 — 이 이미 10분(600초)으로 설정되어 있으므로, 메타데이터 DB의 타임아웃도 이에 맞추는 것이 합리적이다.</p><p>더 근본적인 해결 방법도 생각해봤다. 데이터 다운로드가 진행되는 동안 권한 체크용 트랜잭션이 열려 있을 필요가 없으니, Superset 코드를 수정해서 권한 확인 후 바로 트랜잭션을 커밋하는 방법이 있다. 또는 메타데이터 DB 앞에 PgBouncer 같은 커넥션 풀러를 두고 transaction pooling 모드로 운영하면 idle 트랜잭션 자체가 줄어든다.</p><p>하지만 이 두 방법은 코드 변경이나 아키텍처 변경이 필요하고, 영향 범위를 충분히 검증해야 한다. RDS 파라미터 변경은 기존 운영 구조를 건드리지 않으면서 즉시 적용 가능한 방법이었다. 우선 파라미터를 변경하고, 코드 레벨 개선은 별도 티켓으로 분리했다.</p><p>설정 변경 후 50만 행 이상의 CSV 다운로드도 정상 동작함을 확인했다.</p><hr><h2 class="relative group">기타: Helm 차트 db-init Job ARM 노드 이슈<div id=기타-helm-차트-db-init-job-arm-노드-이슈 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%ea%b8%b0%ed%83%80-helm-%ec%b0%a8%ed%8a%b8-db-init-job-arm-%eb%85%b8%eb%93%9c-%ec%9d%b4%ec%8a%88 aria-label=앵커>#</a></span></h2><p>사용자 제보 이슈와는 별개로, 운영 중 발견한 이슈도 하나 있었다.</p><p>Superset 베이스 Helm 차트에 포함된 db-init Job이 amd64 전용 이미지를 사용하고 있었다. 문제는 이 Job의 파드 템플릿에 노드 셀렉터가 설정되어 있지 않아서, Kubernetes 스케줄러가 ARM(Graviton) 노드에 배치하면 이미지 아키텍처 불일치로 실패한다는 것이다.</p><p>우리 EKS 클러스터는 비용 최적화를 위해 amd64와 arm64 노드를 혼용하고 있다. 노드 셀렉터가 없으면 어느 아키텍처 노드에 뜰지 모르기 때문에, amd64 전용 이미지는 확률적으로 실패한다. 배포할 때마다 되다가 안 되다가 해서 원인을 찾는 데 시간이 좀 걸렸다.</p><p>Helm 차트 버전을 v0.7.7에서 v0.8.10으로 올려서 해결했다. 새 버전에서는 db-init Job에도 아키텍처별 노드 셀렉터가 적용되도록 수정되어 있었다.</p><hr><h2 class="relative group">배운 것<div id=배운-것 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#%eb%b0%b0%ec%9a%b4-%ea%b2%83 aria-label=앵커>#</a></span></h2><p><strong>&ldquo;N만 행은 되고 M만 행은 안 된다"는 시간 기반 제한의 신호다.</strong> 행 수 자체가 문제라면 10만 행에서도 안 되어야 한다. 특정 행 수에서 경계가 생긴다면 처리 시간에 걸리는 타임아웃을 의심해야 한다. 이 관점이 없으면 데이터소스 커넥션(Redshift)만 계속 들여다보게 된다.</p><p><strong>에러가 발생하는 커넥션과 원인이 되는 커넥션이 다를 수 있다.</strong> 이번 케이스에서 SSL 커넥션 에러가 발생한 곳은 Redshift가 아니라 메타데이터 DB(Aurora PostgreSQL)였다. 에러 메시지의 드라이버(<code>psycopg2</code> vs <code>sqlalchemy-redshift</code>)를 확인해서 어느 커넥션인지 정확히 파악하는 것이 중요하다. 에러 메시지만 보고 &ldquo;아 Redshift가 끊겼구나"라고 성급하게 결론내리면 방향을 완전히 잘못 잡는다.</p><p><strong>타임아웃 설정은 시스템 전체에서 일관되게 맞춰야 한다.</strong> ALB 타임아웃이 10분, gunicorn 워커 타임아웃이 10분인데, 메타데이터 DB의 idle 트랜잭션 타임아웃만 1분이면, 체인의 가장 약한 고리에서 끊어진다. 분산 시스템에서 타임아웃 설정은 전체 경로를 따라가면서 일관성을 확인해야 한다.</p><p><strong>CSV + 한글 + 윈도우 = BOM이 필수다.</strong> <code>utf-8-sig</code>는 Python에서 BOM을 삽입하는 가장 간단한 방법이다. 인코딩 파라미터 하나만 바꾸면 된다. 윈도우 Excel 사용자가 있는 환경이라면 CSV 내보내기에 기본으로 적용하는 것이 좋다. macOS나 Linux 사용자에게는 BOM이 있어도 없어도 상관없으니, BOM을 넣는 것이 안전한 기본값이다.</p><p><strong>사용자 제보는 가장 가치 있는 QA다.</strong> 6건의 이슈 중 최소 3건(윈도우 CSV 한글 깨짐, 50만 행 CSV 다운로드 실패, Slack 파일 확장자)은 내부 테스트에서 발견하기 극히 어려웠을 것이다. 우리 팀은 주로 macOS 환경에서 테스트하고, 50만 행 이상의 CSV를 다운로드하는 시나리오는 테스트 케이스에 없었다. 실제 사용 패턴은 개발자의 테스트 시나리오와 다르다. 적극적으로 사용해주시고 이슈를 제보해주시는 사용자가 있다는 건 정말 감사한 일이다.</p><p><strong>참고 자료:</strong></p><ul><li><a href=https://github.com/apache/superset/pull/25679 target=_blank rel=noreferrer>Apache Superset - SqlLab overwrite dataset fix</a></li><li><a href=https://github.com/apache/superset/pull/23416 target=_blank rel=noreferrer>Apache Superset - Helm chart db-init fix</a></li><li><a href=https://www.postgresql.org/docs/current/runtime-config-client.html#GUC-IDLE-IN-TRANSACTION-SESSION-TIMEOUT target=_blank rel=noreferrer>PostgreSQL: idle_in_transaction_session_timeout</a></li><li><a href=https://docs.python.org/3/library/codecs.html#module-encodings.utf_8_sig target=_blank rel=noreferrer>Python: utf-8-sig encoding</a></li></ul></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://nanta-data.dev/posts/superset-user-reported-issues/&amp;title=Superset%20%ec%82%ac%ec%9a%a9%ec%9e%90%20%ec%a0%9c%eb%b3%b4%20%ec%9d%b4%ec%8a%88%206%ea%b1%b4%20%eb%8c%80%ec%9d%91%ea%b8%b0" title="LinkedIn에서 공유" aria-label="LinkedIn에서 공유"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://nanta-data.dev/posts/superset-user-reported-issues/&amp;resubmit=true&amp;title=Superset%20%ec%82%ac%ec%9a%a9%ec%9e%90%20%ec%a0%9c%eb%b3%b4%20%ec%9d%b4%ec%8a%88%206%ea%b1%b4%20%eb%8c%80%ec%9d%91%ea%b8%b0" title="Reddit에 게시" aria-label="Reddit에 게시"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://nanta-data.dev/posts/superset-user-reported-issues/&amp;subject=Superset%20%ec%82%ac%ec%9a%a9%ec%9e%90%20%ec%a0%9c%eb%b3%b4%20%ec%9d%b4%ec%8a%88%206%ea%b1%b4%20%eb%8c%80%ec%9d%91%ea%b8%b0" title="이메일로 전송" aria-label="이메일로 전송"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a></section></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span class="flex flex-col"><a class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/posts/bigquery-bi-integration/><span class=leading-6><span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Superset에서 BigQuery가 무한 블로킹되는 이유: gevent와 gRPC의 호환성 문제
</span></a><span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2026-02-27T00:00:00+00:00>2026년 2월 27일</time>
</span></span><span class="flex flex-col items-end"><a class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/posts/s3-table-buckets-poc/><span class=leading-6>S3 테이블 버킷 도입 검토: 매니지드 Iceberg의 가능성과 한계&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
</span></a><span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2026-02-27T00:00:00+00:00>2026년 2월 27일</time></span></span></div></div></footer></article><div id=scroll-to-top class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200"><a href=#the-top class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="맨 위로 스크롤" title="맨 위로 스크롤">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between text-sm text-neutral-500 dark:text-neutral-400"><nav><ul class="flex list-none flex-row"><li class="me-4 last:me-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/privacy-policy/ title=개인정보처리방침>개인정보처리방침</a></li></ul></nav><p>&copy;
2026
nanta</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500" data-url=https://nanta-data.dev/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=검색 tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="닫기 (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>