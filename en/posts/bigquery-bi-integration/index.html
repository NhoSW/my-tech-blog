<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=theme-color><title>Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility &#183; nanta - Data Engineering</title><meta name=title content="Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility &#183; nanta - Data Engineering"><meta name=description content="We integrated BigQuery with both Redash and Superset for per-user BI access. Redash had a known schema browsing limitation. Superset hit a much worse problem — queries executed successfully on BigQuery but results never came back, blocking indefinitely. The root cause: gunicorn's gevent worker monkey-patches Python's threading primitives, which deadlocks gRPC calls inside the BigQuery SDK. Switching the worker type to gthread resolved it. We contributed a docs fix upstream."><meta name=keywords content="superset,bigquery,redash,gunicorn,gevent,grpc,troubleshooting,"><link rel=canonical href=https://nanta-data.dev/en/posts/bigquery-bi-integration/><meta name=author content="nanta"><link href=https://github.com/NhoSW rel=me><meta property="og:url" content="https://nanta-data.dev/en/posts/bigquery-bi-integration/"><meta property="og:site_name" content="nanta - Data Engineering"><meta property="og:title" content="Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility"><meta property="og:description" content="We integrated BigQuery with both Redash and Superset for per-user BI access. Redash had a known schema browsing limitation. Superset hit a much worse problem — queries executed successfully on BigQuery but results never came back, blocking indefinitely. The root cause: gunicorn’s gevent worker monkey-patches Python’s threading primitives, which deadlocks gRPC calls inside the BigQuery SDK. Switching the worker type to gthread resolved it. We contributed a docs fix upstream."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-27T00:00:00+00:00"><meta property="article:modified_time" content="2026-02-27T00:00:00+00:00"><meta property="article:tag" content="Superset"><meta property="article:tag" content="Bigquery"><meta property="article:tag" content="Redash"><meta property="article:tag" content="Gunicorn"><meta property="article:tag" content="Gevent"><meta property="article:tag" content="Grpc"><meta name=twitter:card content="summary"><meta name=twitter:title content="Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility"><meta name=twitter:description content="We integrated BigQuery with both Redash and Superset for per-user BI access. Redash had a known schema browsing limitation. Superset hit a much worse problem — queries executed successfully on BigQuery but results never came back, blocking indefinitely. The root cause: gunicorn’s gevent worker monkey-patches Python’s threading primitives, which deadlocks gRPC calls inside the BigQuery SDK. Switching the worker type to gthread resolved it. We contributed a docs fix upstream."><link type=text/css rel=stylesheet href=/css/main.bundle.min.c14e86e0d9a09802d254d2a15c05847ae65bfc2e98c2166fabc67369d2d7f2eae6c1da03bbba58cfd41a4af802147c75ce9fdc11dd724ac627ab2903942cbb79.css integrity="sha512-wU6G4NmgmALSVNKhXAWEeuZb/C6YwhZvq8ZzadLX8urmwdoDu7pYz9QaSvgCFHx1zp/cEd1ySsYnqykDlCy7eQ=="><script type=text/javascript src=/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js integrity="sha512-b0EXSzoFtoCCD+CMrb+l+3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script><script src=/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7+kfJ6kKCJxQGC+8wm+Bz9JucDjDTGNew=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.bdda7dece6cbaf08deef7d254f7f842f3261c2524d247905127c9a20decc03f1011a2950048464c79272c1ce0705a49a41147f39f2b95163bb71d404b33263ef.js integrity="sha512-vdp97ObLrwje730lT3+ELzJhwlJNJHkFEnyaIN7MA/EBGilQBIRkx5Jywc4HBaSaQRR/OfK5UWO7cdQEszJj7w==" data-copy=Copy data-copied=Copied></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility","headline":"Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility","inLanguage":"en","url":"https://nanta-data.dev/en/posts/bigquery-bi-integration/","author":{"@type":"Person","name":"nanta"},"copyrightYear":"2026","dateCreated":"2026-02-27T00:00:00\u002b00:00","datePublished":"2026-02-27T00:00:00\u002b00:00","dateModified":"2026-02-27T00:00:00\u002b00:00","keywords":["superset","bigquery","redash","gunicorn","gevent","grpc","troubleshooting"],"mainEntityOfPage":"true","wordCount":"1448"}]</script><link rel=preconnect href=https://cdn.jsdelivr.net crossorigin><link href=https://cdn.jsdelivr.net/npm/geist@1.3.1/dist/fonts/geist-sans/style.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/geist@1.3.1/dist/fonts/geist-mono/style.min.css rel=stylesheet><meta name=google-adsense-account content="ca-pub-9172052068678434"></head><body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral bf-scrollbar"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 z-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl bg-neutral/25 dark:bg-neutral-800/25"></div><div class="relative m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32"><div class="main-menu flex items-center w-full gap-2 p-1 pl-0"><a href=/en/ class="text-base font-medium truncate min-w-0 shrink">nanta - Data Engineering</a><div class="flex items-center ms-auto"><div class="hidden md:flex"><nav class="flex items-center gap-x-5 h-12"><a href=/en/posts/ class="flex items-center bf-icon-color-hover" aria-label=Posts title=Posts><span class="text-base font-medium break-normal">Posts
</span></a><a href=/en/categories/ class="flex items-center bf-icon-color-hover" aria-label=Categories title=Categories><span class="text-base font-medium break-normal">Categories
</span></a><a href=/en/tags/ class="flex items-center bf-icon-color-hover" aria-label=Tags title=Tags><span class="text-base font-medium break-normal">Tags
</span></a><a href=/en/about/ class="flex items-center bf-icon-color-hover" aria-label=About title=About><span class="text-base font-medium break-normal">About</span></a><div class="translation nested-menu"><button class="cursor-pointer flex items-center">
<span class=me-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span>
</span><span class="text-sm font-medium bf-icon-color-hover" title="Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility">EN</span></button><ul class=menuhide><li class="rounded-xl backdrop-blur shadow-2xl p-2 flex flex-col gap-1"><a href=/posts/bigquery-bi-integration/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Superset에서 BigQuery가 무한 블로킹되는 이유: gevent와 gRPC의 호환성 문제">한국어
</span></a><a href=/en/posts/bigquery-bi-integration/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility">English</span></a></li></ul></div><button id=search-button aria-label=Search class="text-base bf-icon-color-hover" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base bf-icon-color-hover"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav></div><div class="flex md:hidden"><div class="flex items-center h-14 gap-4"><button id=search-button-mobile aria-label=Search class="flex items-center justify-center bf-icon-color-hover" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile type=button aria-label="Dark mode switcher" class="flex items-center justify-center text-neutral-900 hover:text-primary-600 dark:text-neutral-200 dark:hover:text-primary-400"><div class=dark:hidden><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="hidden dark:block"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button>
<input type=checkbox id=mobile-menu-toggle autocomplete=off class="hidden peer">
<label for=mobile-menu-toggle class="flex items-center justify-center cursor-pointer bf-icon-color-hover"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></label><div role=dialog aria-modal=true style=scrollbar-gutter:stable class="fixed inset-0 z-50 invisible overflow-y-auto px-6 py-20 opacity-0 transition-[opacity,visibility] duration-300 peer-checked:visible peer-checked:opacity-100 bg-neutral-50/97 dark:bg-neutral-900/99
bf-scrollbar"><label for=mobile-menu-toggle class="fixed end-8 top-5 flex items-center justify-center z-50 h-12 w-12 cursor-pointer select-none rounded-full bf-icon-color-hover border bf-border-color bf-border-color-hover bg-neutral-50 dark:bg-neutral-900"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></label><nav class="mx-auto max-w-md space-y-6"><div class=px-2><a href=/en/posts/ aria-label=Posts class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Posts class="text-2xl font-bold tracking-tight">Posts</span></a></div><div class=px-2><a href=/en/categories/ aria-label=Categories class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Categories class="text-2xl font-bold tracking-tight">Categories</span></a></div><div class=px-2><a href=/en/tags/ aria-label=Tags class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Tags class="text-2xl font-bold tracking-tight">Tags</span></a></div><div class=px-2><a href=/en/about/ aria-label=About class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=About class="text-2xl font-bold tracking-tight">About</span></a></div><div class="flex flex-wrap items-center [&_span]:text-2xl [&_.translation_button_.icon]:text-4xl! [&_.translation_button_span]:text-base! [&_.translation_.menuhide_span]:text-sm! gap-x-6 ps-2 mt-8 pt-8 border-t bf-border-color"><div class="translation nested-menu"><button class="cursor-pointer flex items-center">
<span class=me-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span>
</span><span class="text-sm font-medium bf-icon-color-hover" title="Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility">EN</span></button><ul class=menuhide><li class="rounded-xl backdrop-blur shadow-2xl p-2 flex flex-col gap-1"><a href=/posts/bigquery-bi-integration/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Superset에서 BigQuery가 무한 블로킹되는 이유: gevent와 gRPC의 호환성 문제">한국어
</span></a><a href=/en/posts/bigquery-bi-integration/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility">English</span></a></li></ul></div></div></nav></div></div></div></div></div></div></div><script type=text/javascript src=/js/background-blur.min.605b3b942818f0ab5a717ae446135ec46b8ee5a2ad12ae56fb90dc2a76ce30c388f9fec8bcc18db15bd47e3fa8a09d779fa12aa9c184cf614a315bc72c6c163d.js integrity="sha512-YFs7lCgY8KtacXrkRhNexGuO5aKtEq5W+5DcKnbOMMOI+f7IvMGNsVvUfj+ooJ13n6EqqcGEz2FKMVvHLGwWPQ==" data-blur-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/en/>nanta - Data Engineering</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/en/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/en/posts/bigquery-bi-integration/>Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Why BigQuery Hangs in Superset: The gevent and gRPC Incompatibility</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2026-02-27T00:00:00+00:00>27 February 2026</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div></div><div class="flex author"><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">nanta</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Data Engineering blog covering Apache Kafka, Airflow, Trino, StarRocks, and modern data infrastructure. Sharing practical lessons from production.</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/NhoSW target=_blank aria-label=Github title=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ms-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs"><div class="toc ps-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain bf-scrollbar rounded-lg -ms-5 ps-5 pe-2 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#redash-bigquery-integration>Redash BigQuery Integration</a></li><li><a href=#superset-bigquery-integration>Superset BigQuery Integration</a><ul><li><a href=#dependency-installation>Dependency Installation</a></li><li><a href=#queries-start-blocking>Queries Start Blocking</a></li></ul></li><li><a href=#why-sqllab-works-but-charts-dont>Why SqlLab Works but Charts Don&rsquo;t</a><ul><li><a href=#async-mode-behavior-differences>Async Mode Behavior Differences</a></li><li><a href=#code-level-blocking-point>Code-Level Blocking Point</a></li></ul></li><li><a href=#root-cause-gevents-monkey-patching-deadlocks-grpc>Root Cause: gevent&rsquo;s Monkey Patching Deadlocks gRPC</a><ul><li><a href=#gunicorn-worker-types>gunicorn Worker Types</a></li><li><a href=#how-monkey-patching-deadlocks-grpc>How Monkey Patching Deadlocks gRPC</a></li><li><a href=#why-celery-workers-are-fine>Why Celery Workers Are Fine</a></li></ul></li><li><a href=#fix-gevent-to-gthread>Fix: gevent to gthread</a><ul><li><a href=#worker-type-switch>Worker Type Switch</a></li><li><a href=#concurrency-impact>Concurrency Impact</a></li><li><a href=#upstream-contribution>Upstream Contribution</a></li></ul></li><li><a href=#note-on-impersonation>Note on Impersonation</a></li><li><a href=#takeaways>Takeaways</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#redash-bigquery-integration>Redash BigQuery Integration</a></li><li><a href=#superset-bigquery-integration>Superset BigQuery Integration</a><ul><li><a href=#dependency-installation>Dependency Installation</a></li><li><a href=#queries-start-blocking>Queries Start Blocking</a></li></ul></li><li><a href=#why-sqllab-works-but-charts-dont>Why SqlLab Works but Charts Don&rsquo;t</a><ul><li><a href=#async-mode-behavior-differences>Async Mode Behavior Differences</a></li><li><a href=#code-level-blocking-point>Code-Level Blocking Point</a></li></ul></li><li><a href=#root-cause-gevents-monkey-patching-deadlocks-grpc>Root Cause: gevent&rsquo;s Monkey Patching Deadlocks gRPC</a><ul><li><a href=#gunicorn-worker-types>gunicorn Worker Types</a></li><li><a href=#how-monkey-patching-deadlocks-grpc>How Monkey Patching Deadlocks gRPC</a></li><li><a href=#why-celery-workers-are-fine>Why Celery Workers Are Fine</a></li></ul></li><li><a href=#fix-gevent-to-gthread>Fix: gevent to gthread</a><ul><li><a href=#worker-type-switch>Worker Type Switch</a></li><li><a href=#concurrency-impact>Concurrency Impact</a></li><li><a href=#upstream-contribution>Upstream Contribution</a></li></ul></li><li><a href=#note-on-impersonation>Note on Impersonation</a></li><li><a href=#takeaways>Takeaways</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><p>A request came in to enable BigQuery access through our BI tools based on per-user permissions. We proceeded to integrate BigQuery with both Redash and Superset, the two BI platforms we operate.</p><p>Redash was relatively straightforward. It had a known limitation where schema browsing doesn&rsquo;t work, but queries ran fine. Superset was a different story. Queries were successfully submitted to BigQuery but results never came back — infinite blocking. Tracing the cause led us deep into Python&rsquo;s concurrency model where a fundamental conflict was happening.</p><hr><h2 class="relative group">Redash BigQuery Integration<div id=redash-bigquery-integration class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#redash-bigquery-integration aria-label=Anchor>#</a></span></h2><p>Integrating BigQuery with Redash is simple. Add BigQuery as a Data Source and register the service account JSON key.</p><p>Query execution works normally. But there&rsquo;s one problem: the web UI can&rsquo;t browse dataset and table schemas. The sidebar shows no table list.</p><p>This is a known issue in the Redash community. BigQuery&rsquo;s metadata API response structure doesn&rsquo;t match Redash&rsquo;s schema parsing logic. It&rsquo;s been reported for years but never fixed. With Redash&rsquo;s project activity declining, a fix is unlikely.</p><p>Schema browsing has to be done directly in the BigQuery web console. It&rsquo;s inconvenient for query writing, but since we planned to use Superset as the primary BigQuery BI tool, we left Redash in this state.</p><hr><h2 class="relative group">Superset BigQuery Integration<div id=superset-bigquery-integration class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#superset-bigquery-integration aria-label=Anchor>#</a></span></h2><h3 class="relative group">Dependency Installation<div id=dependency-installation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#dependency-installation aria-label=Anchor>#</a></span></h3><p>Integrating BigQuery with Superset requires adding <code>sqlalchemy-bigquery</code> and <code>pybigquery</code> dependencies. Since we run Superset as a custom Docker image, we added the dependencies at the image build stage.</p><p>The BigQuery packages caused version conflicts with existing Superset dependencies. Aligning versions of <code>google-cloud-bigquery</code>, <code>google-auth</code>, <code>grpcio</code>, and others required some work. After resolving the dependency conflicts, we built and deployed the image.</p><p>Unlike Redash, Superset correctly displayed BigQuery dataset and table schemas in the web UI. This alone was sufficient reason to use Superset as the BigQuery BI tool.</p><h3 class="relative group">Queries Start Blocking<div id=queries-start-blocking class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#queries-start-blocking aria-label=Anchor>#</a></span></h3><p>After finishing dependency installation and connection configuration, we started testing. Something was wrong.</p><p>Queries executed in SqlLab returned results normally. But running queries in the chart development screen produced no response. After about 60 seconds, a Gateway Timeout occurred.</p><p>Checking the GCP BigQuery console, even the blocked queries had been successfully submitted and completed on the BigQuery side. The queries ran — but results weren&rsquo;t making it back to Superset.</p><p>At this point we searched Superset&rsquo;s GitHub Issues. An issue reporting identical symptoms existed. But the workarounds suggested in the thread didn&rsquo;t resolve our case.</p><hr><h2 class="relative group">Why SqlLab Works but Charts Don&rsquo;t<div id=why-sqllab-works-but-charts-dont class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#why-sqllab-works-but-charts-dont aria-label=Anchor>#</a></span></h2><p>We began debugging directly, tracking what differs between SqlLab and the chart development screen.</p><h3 class="relative group">Async Mode Behavior Differences<div id=async-mode-behavior-differences class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#async-mode-behavior-differences aria-label=Anchor>#</a></span></h3><p>With Superset&rsquo;s async mode (<code>ASYNC_QUERIES_REDIS</code>) enabled, SqlLab queries are delegated to Celery workers. Celery workers execute queries in separate processes and store results in Redis. The web server just polls for results and returns them to the user.</p><p>But in the dashboard and chart development environment, even with async mode enabled, query submission logic runs directly in the web server process (gunicorn). We confirmed this difference by examining pod logs.</p><p>Enabling the <code>GLOBAL_ASYNC_QUERIES</code> feature flag causes some additional UI paths to use Celery workers, but operations like force refresh (cache bypass) still submit queries from the web server.</p><p>Summary:</p><table><thead><tr><th>Execution Context</th><th>Query Execution Location</th><th>Result</th></tr></thead><tbody><tr><td>SqlLab</td><td>Celery worker</td><td>Works</td></tr><tr><td>Chart development</td><td>gunicorn web server</td><td>Blocks</td></tr><tr><td>Force refresh</td><td>gunicorn web server</td><td>Blocks</td></tr></tbody></table><p><strong>Works when running on Celery workers, blocks when running on the gunicorn web server.</strong> The problem is in gunicorn.</p><h3 class="relative group">Code-Level Blocking Point<div id=code-level-blocking-point class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#code-level-blocking-point aria-label=Anchor>#</a></span></h3><p>We traced through the code to identify the exact blocking point. It was in Superset&rsquo;s <code>db_engine_specs/bigquery.py</code>, where the <code>python-bigquery</code> SDK method is called. On Celery workers, this call returns normally. On the gunicorn web server, it hangs indefinitely.</p><p>We were now certain there was a compatibility issue between the <code>python-bigquery</code> library and the gunicorn server.</p><hr><h2 class="relative group">Root Cause: gevent&rsquo;s Monkey Patching Deadlocks gRPC<div id=root-cause-gevents-monkey-patching-deadlocks-grpc class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#root-cause-gevents-monkey-patching-deadlocks-grpc aria-label=Anchor>#</a></span></h2><h3 class="relative group">gunicorn Worker Types<div id=gunicorn-worker-types class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#gunicorn-worker-types aria-label=Anchor>#</a></span></h3><p>gunicorn supports several worker types. We were using <code>gevent</code>.</p><ul><li><strong>sync</strong>: One request per worker. Simple but low concurrency.</li><li><strong>gthread</strong>: Thread pool per worker. Uses Python&rsquo;s native threading.</li><li><strong>gevent</strong>: Greenlet-based coroutines. Can handle thousands of concurrent connections with minimal resources.</li></ul><p>gevent achieves high concurrency through a special technique. When the Python process starts, it dynamically replaces standard library I/O, socket, and threading modules with its own implementations. This is called <strong>monkey patching</strong>. When you <code>import socket</code>, you actually get gevent&rsquo;s socket.</p><h3 class="relative group">How Monkey Patching Deadlocks gRPC<div id=how-monkey-patching-deadlocks-grpc class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#how-monkey-patching-deadlocks-grpc aria-label=Anchor>#</a></span></h3><p>The BigQuery Python SDK (<code>google-cloud-bigquery</code>) uses gRPC internally. gRPC has a C core with Python bindings on top, and it relies on native OS threads.</p><p>The problem occurs when gevent monkey-patches Python&rsquo;s <code>concurrent.futures.ThreadPoolExecutor</code>. The BigQuery SDK uses <code>ThreadPoolExecutor</code> while waiting for gRPC call results. gevent&rsquo;s patched version of this executor is incompatible with gRPC&rsquo;s native threads. The result: gRPC calls complete at the C level, but the Python side never receives the result and waits forever.</p><p>This wasn&rsquo;t a new problem. The <code>python-bigquery</code> repo had a past issue where the <code>to_dataframe()</code> method blocked under gevent. That specific method was fixed, but the same class of problem manifested in other gRPC call paths within the BigQuery SDK.</p><p>Related issues exist in both gevent&rsquo;s and gRPC&rsquo;s GitHub repos. The gevent + gRPC combination is structurally difficult to make compatible.</p><h3 class="relative group">Why Celery Workers Are Fine<div id=why-celery-workers-are-fine class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#why-celery-workers-are-fine aria-label=Anchor>#</a></span></h3><p>Celery workers run as separate processes from gunicorn. In the default configuration, Celery workers use <code>prefork</code> mode, where gevent&rsquo;s monkey patching is not applied. Python&rsquo;s standard threading works as-is, so there&rsquo;s no gRPC compatibility issue.</p><p>Monkey patching only applies in the gunicorn web server process — which is exactly why only the web server experienced blocking.</p><hr><h2 class="relative group">Fix: gevent to gthread<div id=fix-gevent-to-gthread class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#fix-gevent-to-gthread aria-label=Anchor>#</a></span></h2><h3 class="relative group">Worker Type Switch<div id=worker-type-switch class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#worker-type-switch aria-label=Anchor>#</a></span></h3><p>We switched gunicorn&rsquo;s worker type from <code>gevent</code> to <code>gthread</code>.</p><p><code>gthread</code> uses Python&rsquo;s native threading. No monkey patching means <code>concurrent.futures.ThreadPoolExecutor</code> and gRPC work correctly together.</p><p>After the switch, BigQuery query logic ran without blocking on the web server. SqlLab, chart development, and force refresh all worked normally.</p><h3 class="relative group">Concurrency Impact<div id=concurrency-impact class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#concurrency-impact aria-label=Anchor>#</a></span></h3><p>Switching from gevent to gthread changes the concurrency characteristics. gevent uses greenlets, handling thousands of concurrent connections with minimal memory. gthread uses OS threads, so concurrent connections are limited by the thread pool size.</p><p>In our environment, Superset&rsquo;s concurrent user count doesn&rsquo;t reach thousands of simultaneous connections, so gthread was sufficient. With appropriate <code>--threads</code> configuration per worker, the practical concurrency difference is negligible.</p><h3 class="relative group">Upstream Contribution<div id=upstream-contribution class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#upstream-contribution aria-label=Anchor>#</a></span></h3><p>Based on this experience, we submitted a PR to the official Superset documentation adding a warning against using the gevent worker type with BigQuery data sources. It was merged. Hopefully it saves others from wasting time on the same issue.</p><p>We also shared the async mode workaround and the gthread root cause fix in the community issue thread.</p><hr><h2 class="relative group">Note on Impersonation<div id=note-on-impersonation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#note-on-impersonation aria-label=Anchor>#</a></span></h2><p>An additional consideration for BigQuery integration is per-user access control (impersonation). If all queries run through a single service account, granular permission control is difficult. Running queries under individual users&rsquo; GCP accounts requires impersonation support.</p><p>The Superset community has active discussions around BigQuery impersonation and an OAuth2-based database authentication proposal (SIP-85). While not fully implemented yet, once this feature stabilizes, per-user BigQuery access control through Superset becomes viable.</p><hr><h2 class="relative group">Takeaways<div id=takeaways class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#takeaways aria-label=Anchor>#</a></span></h2><p><strong>When the same query produces different results depending on the execution path, suspect the execution environment.</strong> SqlLab runs on Celery workers; charts run on the gunicorn web server. That difference was everything. The assumption &ldquo;same query, same result&rdquo; can lead your debugging in the wrong direction.</p><p><strong>gevent&rsquo;s monkey patching is a double-edged sword.</strong> The very mechanism that gives gevent high concurrency — monkey patching Python&rsquo;s standard library — causes conflicts with libraries that depend on native threads, like gRPC. When using gevent in the Python ecosystem, verify that none of your dependencies rely on gRPC or native threading.</p><p><strong>Worker type selection is constrained by your dependencies.</strong> Choosing a gunicorn worker type isn&rsquo;t just about concurrency requirements. You also need to check compatibility with the threading model of your application&rsquo;s libraries. BigQuery SDK + gRPC + gevent is structurally incompatible.</p><p><strong>Read community issue threads to the end.</strong> A comment in the Superset issue thread saying &ldquo;switching from gunicorn to waitress WSGI fixed it&rdquo; was the pivotal clue that pointed us toward gevent as the problem. The habit of reading through the latest comments in issue threads matters.</p><p><strong>When you solve a problem, contribute upstream.</strong> Even a one-line documentation PR saves time for the next person hitting the same issue. The cost of contributing is small relative to the value it provides to the community.</p><p><strong>References:</strong></p><ul><li><a href=https://github.com/apache/superset/issues/23979 target=_blank rel=noreferrer>Superset: Unable to query BigQuery data</a></li><li><a href=https://github.com/googleapis/python-bigquery/issues/697 target=_blank rel=noreferrer>python-bigquery: to_dataframe blocked with gevent</a></li><li><a href=https://github.com/gevent/gevent/issues/1797 target=_blank rel=noreferrer>gevent: BigQuery to_dataframe blocking issue</a></li><li><a href=https://github.com/grpc/grpc/issues/4629 target=_blank rel=noreferrer>gRPC: gevent compatibility</a></li><li><a href=https://github.com/apache/superset/pull/24564 target=_blank rel=noreferrer>Superset docs: add notice not to use gevent with BigQuery</a></li><li><a href=https://github.com/apache/superset/discussions/18269 target=_blank rel=noreferrer>Superset: BigQuery impersonation discussion</a></li><li><a href=https://github.com/apache/superset/issues/20300 target=_blank rel=noreferrer>Superset: OAuth2 for databases (SIP-85)</a></li><li><a href=https://discuss.redash.io/t/big-query-does-not-show-schema/10649 target=_blank rel=noreferrer>Redash: BigQuery does not show schema</a></li><li><a href=https://gunicorn.org/design/ target=_blank rel=noreferrer>Gunicorn: Design / Server Model</a></li></ul></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://nanta-data.dev/en/posts/bigquery-bi-integration/&amp;title=Why%20BigQuery%20Hangs%20in%20Superset:%20The%20gevent%20and%20gRPC%20Incompatibility" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://nanta-data.dev/en/posts/bigquery-bi-integration/&amp;resubmit=true&amp;title=Why%20BigQuery%20Hangs%20in%20Superset:%20The%20gevent%20and%20gRPC%20Incompatibility" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://nanta-data.dev/en/posts/bigquery-bi-integration/&amp;subject=Why%20BigQuery%20Hangs%20in%20Superset:%20The%20gevent%20and%20gRPC%20Incompatibility" title="Send via email" aria-label="Send via email"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a></section></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span class="flex flex-col"><a class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/en/posts/alb-log-collection-system/><span class=leading-6><span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Building an ALB Log Pipeline with Filebeat, Flink, and Iceberg
</span></a><span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2026-02-25T00:00:00+00:00>25 February 2026</time>
</span></span><span class="flex flex-col items-end"><a class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/en/posts/trino-v476-upgrade/><span class=leading-6>Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
</span></a><span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2026-02-27T00:00:00+00:00>27 February 2026</time></span></span></div></div></footer></article><div id=scroll-to-top class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200"><a href=#the-top class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between text-sm text-neutral-500 dark:text-neutral-400"><nav><ul class="flex list-none flex-row"><li class="me-4 last:me-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/en/privacy-policy/ title="Privacy Policy">Privacy Policy</a></li></ul></nav><p>&copy;
2026
nanta</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500" data-url=https://nanta-data.dev/en/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>