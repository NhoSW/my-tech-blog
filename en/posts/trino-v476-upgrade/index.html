<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=theme-color><title>Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions &#183; nanta - Data Engineering</title><meta name=title content="Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions &#183; nanta - Data Engineering"><meta name=description content="We upgraded Trino from v451 to v476 — 25 minor versions in one jump. Blue/Green deployment on our OLAP clusters caught two regressions: a Materialized View refresh bug and a Parquet read failure. We binary-searched the root cause down to a single v469 commit and got a community fix within a day."><meta name=keywords content="trino,upgrade,kubernetes,blue-green,parquet,iceberg,java,"><link rel=canonical href=https://nanta-data.dev/en/posts/trino-v476-upgrade/><meta name=author content="nanta"><link href=https://github.com/NhoSW rel=me><meta property="og:url" content="https://nanta-data.dev/en/posts/trino-v476-upgrade/"><meta property="og:site_name" content="nanta - Data Engineering"><meta property="og:title" content="Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions"><meta property="og:description" content="We upgraded Trino from v451 to v476 — 25 minor versions in one jump. Blue/Green deployment on our OLAP clusters caught two regressions: a Materialized View refresh bug and a Parquet read failure. We binary-searched the root cause down to a single v469 commit and got a community fix within a day."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-27T00:00:00+00:00"><meta property="article:modified_time" content="2026-02-27T00:00:00+00:00"><meta property="article:tag" content="Trino"><meta property="article:tag" content="Upgrade"><meta property="article:tag" content="Kubernetes"><meta property="article:tag" content="Blue-Green"><meta property="article:tag" content="Parquet"><meta property="article:tag" content="Iceberg"><meta name=twitter:card content="summary"><meta name=twitter:title content="Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions"><meta name=twitter:description content="We upgraded Trino from v451 to v476 — 25 minor versions in one jump. Blue/Green deployment on our OLAP clusters caught two regressions: a Materialized View refresh bug and a Parquet read failure. We binary-searched the root cause down to a single v469 commit and got a community fix within a day."><link type=text/css rel=stylesheet href=/css/main.bundle.min.c14e86e0d9a09802d254d2a15c05847ae65bfc2e98c2166fabc67369d2d7f2eae6c1da03bbba58cfd41a4af802147c75ce9fdc11dd724ac627ab2903942cbb79.css integrity="sha512-wU6G4NmgmALSVNKhXAWEeuZb/C6YwhZvq8ZzadLX8urmwdoDu7pYz9QaSvgCFHx1zp/cEd1ySsYnqykDlCy7eQ=="><script type=text/javascript src=/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js integrity="sha512-b0EXSzoFtoCCD+CMrb+l+3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script><script src=/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7+kfJ6kKCJxQGC+8wm+Bz9JucDjDTGNew=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.bdda7dece6cbaf08deef7d254f7f842f3261c2524d247905127c9a20decc03f1011a2950048464c79272c1ce0705a49a41147f39f2b95163bb71d404b33263ef.js integrity="sha512-vdp97ObLrwje730lT3+ELzJhwlJNJHkFEnyaIN7MA/EBGilQBIRkx5Jywc4HBaSaQRR/OfK5UWO7cdQEszJj7w==" data-copy=Copy data-copied=Copied></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions","headline":"Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions","inLanguage":"en","url":"https://nanta-data.dev/en/posts/trino-v476-upgrade/","author":{"@type":"Person","name":"nanta"},"copyrightYear":"2026","dateCreated":"2026-02-27T00:00:00\u002b00:00","datePublished":"2026-02-27T00:00:00\u002b00:00","dateModified":"2026-02-27T00:00:00\u002b00:00","keywords":["trino","upgrade","kubernetes","blue-green","parquet","iceberg","java"],"mainEntityOfPage":"true","wordCount":"1699"}]</script><link rel=preconnect href=https://cdn.jsdelivr.net crossorigin><link href=https://cdn.jsdelivr.net/npm/geist@1.3.1/dist/fonts/geist-sans/style.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/geist@1.3.1/dist/fonts/geist-mono/style.min.css rel=stylesheet></head><body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral bf-scrollbar"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 z-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl bg-neutral/25 dark:bg-neutral-800/25"></div><div class="relative m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32"><div class="main-menu flex items-center w-full gap-2 p-1 pl-0"><a href=/en/ class="text-base font-medium truncate min-w-0 shrink">nanta - Data Engineering</a><div class="flex items-center ms-auto"><div class="hidden md:flex"><nav class="flex items-center gap-x-5 h-12"><a href=/en/posts/ class="flex items-center bf-icon-color-hover" aria-label=Posts title=Posts><span class="text-base font-medium break-normal">Posts
</span></a><a href=/en/categories/ class="flex items-center bf-icon-color-hover" aria-label=Categories title=Categories><span class="text-base font-medium break-normal">Categories
</span></a><a href=/en/tags/ class="flex items-center bf-icon-color-hover" aria-label=Tags title=Tags><span class="text-base font-medium break-normal">Tags
</span></a><a href=/en/about/ class="flex items-center bf-icon-color-hover" aria-label=About title=About><span class="text-base font-medium break-normal">About</span></a><div class="translation nested-menu"><button class="cursor-pointer flex items-center">
<span class=me-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span>
</span><span class="text-sm font-medium bf-icon-color-hover" title="Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions">EN</span></button><ul class=menuhide><li class="rounded-xl backdrop-blur shadow-2xl p-2 flex flex-col gap-1"><a href=/posts/trino-v476-upgrade/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Trino v451에서 v476으로: 25개 버전을 건너뛴 운영 클러스터 업그레이드">한국어
</span></a><a href=/en/posts/trino-v476-upgrade/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions">English</span></a></li></ul></div><button id=search-button aria-label=Search class="text-base bf-icon-color-hover" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base bf-icon-color-hover"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav></div><div class="flex md:hidden"><div class="flex items-center h-14 gap-4"><button id=search-button-mobile aria-label=Search class="flex items-center justify-center bf-icon-color-hover" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile type=button aria-label="Dark mode switcher" class="flex items-center justify-center text-neutral-900 hover:text-primary-600 dark:text-neutral-200 dark:hover:text-primary-400"><div class=dark:hidden><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="hidden dark:block"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button>
<input type=checkbox id=mobile-menu-toggle autocomplete=off class="hidden peer">
<label for=mobile-menu-toggle class="flex items-center justify-center cursor-pointer bf-icon-color-hover"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></label><div role=dialog aria-modal=true style=scrollbar-gutter:stable class="fixed inset-0 z-50 invisible overflow-y-auto px-6 py-20 opacity-0 transition-[opacity,visibility] duration-300 peer-checked:visible peer-checked:opacity-100 bg-neutral-50/97 dark:bg-neutral-900/99
bf-scrollbar"><label for=mobile-menu-toggle class="fixed end-8 top-5 flex items-center justify-center z-50 h-12 w-12 cursor-pointer select-none rounded-full bf-icon-color-hover border bf-border-color bf-border-color-hover bg-neutral-50 dark:bg-neutral-900"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></label><nav class="mx-auto max-w-md space-y-6"><div class=px-2><a href=/en/posts/ aria-label=Posts class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Posts class="text-2xl font-bold tracking-tight">Posts</span></a></div><div class=px-2><a href=/en/categories/ aria-label=Categories class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Categories class="text-2xl font-bold tracking-tight">Categories</span></a></div><div class=px-2><a href=/en/tags/ aria-label=Tags class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=Tags class="text-2xl font-bold tracking-tight">Tags</span></a></div><div class=px-2><a href=/en/about/ aria-label=About class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span title=About class="text-2xl font-bold tracking-tight">About</span></a></div><div class="flex flex-wrap items-center [&_span]:text-2xl [&_.translation_button_.icon]:text-4xl! [&_.translation_button_span]:text-base! [&_.translation_.menuhide_span]:text-sm! gap-x-6 ps-2 mt-8 pt-8 border-t bf-border-color"><div class="translation nested-menu"><button class="cursor-pointer flex items-center">
<span class=me-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3.0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3.0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2 179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5.0-28.3s20.5-7.8 28.3.0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg></span>
</span><span class="text-sm font-medium bf-icon-color-hover" title="Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions">EN</span></button><ul class=menuhide><li class="rounded-xl backdrop-blur shadow-2xl p-2 flex flex-col gap-1"><a href=/posts/trino-v476-upgrade/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Trino v451에서 v476으로: 25개 버전을 건너뛴 운영 클러스터 업그레이드">한국어
</span></a><a href=/en/posts/trino-v476-upgrade/ class="flex items-center bf-icon-color-hover px-3 py-1"><span class="text-sm font-sm" title="Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions">English</span></a></li></ul></div></div></nav></div></div></div></div></div></div></div><script type=text/javascript src=/js/background-blur.min.605b3b942818f0ab5a717ae446135ec46b8ee5a2ad12ae56fb90dc2a76ce30c388f9fec8bcc18db15bd47e3fa8a09d779fa12aa9c184cf614a315bc72c6c163d.js integrity="sha512-YFs7lCgY8KtacXrkRhNexGuO5aKtEq5W+5DcKnbOMMOI+f7IvMGNsVvUfj+ooJ13n6EqqcGEz2FKMVvHLGwWPQ==" data-blur-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/en/>nanta - Data Engineering</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/en/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/en/posts/trino-v476-upgrade/>Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Trino v451 to v476: Upgrading a Production Cluster Across 25 Versions</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2026-02-27T00:00:00+00:00>27 February 2026</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">8 mins</span></div></div><div class="flex author"><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">nanta</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Data Engineering blog covering Apache Kafka, Airflow, Trino, StarRocks, and modern data infrastructure. Sharing practical lessons from production.</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/NhoSW target=_blank aria-label=Github title=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ms-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs"><div class="toc ps-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain bf-scrollbar rounded-lg -ms-5 ps-5 pe-2 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#why-v476>Why v476</a><ul><li><a href=#java-22-to-java-24>Java 22 to Java 24</a></li><li><a href=#s3-table-bucket-read-support>S3 Table Bucket Read Support</a></li><li><a href=#bucket-partition-push-down>Bucket Partition Push Down</a></li><li><a href=#iceberg-meta-table-improvements>Iceberg Meta-Table Improvements</a></li><li><a href=#alluxio-file-system-cache>Alluxio File System Cache</a></li><li><a href=#apache-ranger-plugin>Apache Ranger Plugin</a></li></ul></li><li><a href=#deployment-strategy>Deployment Strategy</a><ul><li><a href=#bluegreen-gradual-rollout>Blue/Green Gradual Rollout</a></li><li><a href=#unresolved-issues-from-v451>Unresolved Issues from v451</a></li></ul></li><li><a href=#first-deployment-and-rollback>First Deployment and Rollback</a><ul><li><a href=#materialized-view-refresh-stuck>Materialized View REFRESH Stuck</a></li><li><a href=#parquet-file-data-not-recognized>Parquet File Data Not Recognized</a></li></ul></li><li><a href=#binary-searching-for-the-root-cause>Binary Searching for the Root Cause</a></li><li><a href=#root-cause-parquet-footer-optimization-meets-legacy-pyarrow>Root Cause: Parquet Footer Optimization Meets Legacy pyarrow</a></li><li><a href=#community-report-and-one-day-fix>Community Report and One-Day Fix</a></li><li><a href=#redeployment-and-results>Redeployment and Results</a></li><li><a href=#takeaways>Takeaways</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#why-v476>Why v476</a><ul><li><a href=#java-22-to-java-24>Java 22 to Java 24</a></li><li><a href=#s3-table-bucket-read-support>S3 Table Bucket Read Support</a></li><li><a href=#bucket-partition-push-down>Bucket Partition Push Down</a></li><li><a href=#iceberg-meta-table-improvements>Iceberg Meta-Table Improvements</a></li><li><a href=#alluxio-file-system-cache>Alluxio File System Cache</a></li><li><a href=#apache-ranger-plugin>Apache Ranger Plugin</a></li></ul></li><li><a href=#deployment-strategy>Deployment Strategy</a><ul><li><a href=#bluegreen-gradual-rollout>Blue/Green Gradual Rollout</a></li><li><a href=#unresolved-issues-from-v451>Unresolved Issues from v451</a></li></ul></li><li><a href=#first-deployment-and-rollback>First Deployment and Rollback</a><ul><li><a href=#materialized-view-refresh-stuck>Materialized View REFRESH Stuck</a></li><li><a href=#parquet-file-data-not-recognized>Parquet File Data Not Recognized</a></li></ul></li><li><a href=#binary-searching-for-the-root-cause>Binary Searching for the Root Cause</a></li><li><a href=#root-cause-parquet-footer-optimization-meets-legacy-pyarrow>Root Cause: Parquet Footer Optimization Meets Legacy pyarrow</a></li><li><a href=#community-report-and-one-day-fix>Community Report and One-Day Fix</a></li><li><a href=#redeployment-and-results>Redeployment and Results</a></li><li><a href=#takeaways>Takeaways</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><p>We upgraded Trino from v451 to v476. Released June 5, 2025, v476 sits 25 minor versions ahead of what we were running. The change surface was massive, and we hit two regressions during rollout. One of them had never been reported in the community.</p><p>This post covers what we expected from the upgrade, what actually happened during deployment, and how we tracked down and resolved the regressions.</p><hr><h2 class="relative group">Why v476<div id=why-v476 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#why-v476 aria-label=Anchor>#</a></span></h2><h3 class="relative group">Java 22 to Java 24<div id=java-22-to-java-24 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#java-22-to-java-24 aria-label=Anchor>#</a></span></h3><p>Trino aggressively adopts the latest JVM. It started requiring Java 22 at v447, Java 23 at v464, and Java 24 at v476. This isn&rsquo;t just a runtime version bump. Project Hummingbird is Trino&rsquo;s ongoing performance initiative that leverages Java&rsquo;s Vector API for vectorized execution. Vectorized Parquet decoding landed in v448, requiring 256-bit or larger vector registers — disabled on Graviton 2 instances (r6g, m6g) but automatically enabled on Graviton 3 and later.</p><p>Java 24&rsquo;s latest JIT compiler optimizations and memory management improvements directly impact query processing performance.</p><h3 class="relative group">S3 Table Bucket Read Support<div id=s3-table-bucket-read-support class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#s3-table-bucket-read-support aria-label=Anchor>#</a></span></h3><p>Starting v471, the Iceberg connector can read from S3 Table Buckets. We were evaluating S3 Table Buckets as managed Iceberg tables for our CDC workloads, so Trino read support was a prerequisite. Integration goes through the Glue Data Catalog&rsquo;s Iceberg REST endpoint, requiring a separate REST-type catalog rather than the existing Glue-type catalog.</p><h3 class="relative group">Bucket Partition Push Down<div id=bucket-partition-push-down class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#bucket-partition-push-down aria-label=Anchor>#</a></span></h3><p>Partitioning push down added in v468 optimizes scans on bucket-partitioned tables by pushing query conditions down to the partition level, reducing scan scope.</p><p>In our environment, app log and web log tables use bucket partitions on <code>screen_name</code>. These are large tables, so the performance improvement from bucket partition push down was expected to be significant.</p><h3 class="relative group">Iceberg Meta-Table Improvements<div id=iceberg-meta-table-improvements class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#iceberg-meta-table-improvements aria-label=Anchor>#</a></span></h3><p>Fixes we had cherry-picked during our Iceberg monitoring buildout are now natively included in v476.</p><table><thead><tr><th>Version</th><th>Improvement</th></tr></thead><tbody><tr><td>v455</td><td>Fixed <code>$files</code> meta-table not recognizing delete files</td></tr><tr><td>v465</td><td>Added <code>partition</code> field to <code>$files</code> meta-table</td></tr><tr><td>v466</td><td>Parallelized Glue Catalog queries for performance</td></tr><tr><td>v469</td><td>Added <code>$all_entries</code> meta-table (corresponds to Spark&rsquo;s <code>all_entries</code>)</td></tr><tr><td>v470</td><td><code>$all_entries</code> bug fix, <code>optimize_manifests</code> procedure added</td></tr><tr><td>v475</td><td><code>system.iceberg_tables</code> table added (list Iceberg tables only)</td></tr></tbody></table><p>Being able to use all these features without cherry-picking was reason enough for the upgrade.</p><h3 class="relative group">Alluxio File System Cache<div id=alluxio-file-system-cache class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#alluxio-file-system-cache aria-label=Anchor>#</a></span></h3><p>Beyond the existing Alluxio-based local disk cache, a new feature allows integrating an external Alluxio cluster as a file system. This enables cross-catalog and cross-cluster cache sharing. Not something we planned to adopt immediately, but a useful option for future cache architecture improvements.</p><h3 class="relative group">Apache Ranger Plugin<div id=apache-ranger-plugin class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#apache-ranger-plugin aria-label=Anchor>#</a></span></h3><p>The Apache Ranger authorization plugin was merged into the official Trino repository. Previously maintained in a separate repo, its inclusion in the main project simplifies version compatibility management.</p><hr><h2 class="relative group">Deployment Strategy<div id=deployment-strategy class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#deployment-strategy aria-label=Anchor>#</a></span></h2><h3 class="relative group">Blue/Green Gradual Rollout<div id=bluegreen-gradual-rollout class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#bluegreen-gradual-rollout aria-label=Anchor>#</a></span></h3><p>Both our OLAP and BI cluster groups have Blue/Green pairs. The upgrade plan:</p><ol><li>Deploy to one side (Green) of each cluster group</li><li>Monitor for one week</li><li>If no issues, apply to the other side (Blue)</li></ol><p>If issues arise, we can immediately deactivate the upgraded cluster from Trino Gateway routing and roll back. This strategy is only possible because we operate Trino Gateway in front of our clusters. It proved essential — when we hit regressions, we rolled back with zero production impact.</p><p>We chose to start with OLAP-Green. OLAP has more diverse query patterns than BI, making it more likely to surface regressions quickly.</p><h3 class="relative group">Unresolved Issues from v451<div id=unresolved-issues-from-v451 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#unresolved-issues-from-v451 aria-label=Anchor>#</a></span></h3><p>Two issues from the v451 deployment remained open. We prepared mitigation plans in advance.</p><p><strong>Worker stuck issue</strong></p><p>During the v451 rollout, some workers would freeze under heavy load. The cause was <code>ThreadPerDriverTaskExecutor</code>, an experimental feature that had been added as default-enabled without documentation. The community issue was still open and unresolved.</p><p>We planned to disable <code>experimental.thread-per-driver-scheduler-enabled=false</code> again, same as before.</p><p><strong>Partition pruning regression</strong></p><p>Partition pruning failed when filter conditions contained type casts — for example, <code>WHERE date_column = CAST('2024-01-01' AS DATE)</code> wouldn&rsquo;t properly filter partitions.</p><p>For v451, we had reverted the causal commit directly. In the meantime, the community added an escape hatch setting that allows unsafe pushdowns. We planned to use this setting instead.</p><hr><h2 class="relative group">First Deployment and Rollback<div id=first-deployment-and-rollback class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#first-deployment-and-rollback aria-label=Anchor>#</a></span></h2><p>On June 23, 2025, after core business hours, we deployed v476 to OLAP-Green. Users were notified through the Zeppelin support channel.</p><h3 class="relative group">Materialized View REFRESH Stuck<div id=materialized-view-refresh-stuck class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#materialized-view-refresh-stuck aria-label=Anchor>#</a></span></h3><p>Shortly after deployment, reports came in that Airflow DAGs refreshing Iceberg materialized views were getting stuck. The REFRESH queries were hanging in FINISHING state indefinitely.</p><p>Checking the Trino repo, we found that a v475 change titled &ldquo;Cleanup previous snapshot files during materialized view refresh&rdquo; had caused the regression. The timing was fortunate — a revert PR had been merged just the day before. We applied the revert commit to our fork and the issue was resolved.</p><h3 class="relative group">Parquet File Data Not Recognized<div id=parquet-file-data-not-recognized class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#parquet-file-data-not-recognized aria-label=Anchor>#</a></span></h3><p>A more serious issue followed. A user reported incorrect query results from JupyterLab. Investigation revealed that a specific Hive table was returning no data at all.</p><p>The pattern: the user had written Parquet files to S3 first, then created a Hive table pointing to that location afterward. This worked perfectly on v451, but v476 couldn&rsquo;t see the pre-existing data files.</p><p>What we confirmed:</p><ul><li>The issue reproduced regardless of which engine created the data files (Trino v451, v476, or Spark)</li><li>Glue API version (v1 vs v2) was irrelevant</li><li>Running Spark&rsquo;s <code>MSCK REPAIR TABLE</code> or Trino&rsquo;s <code>system.sync_partition_metadata()</code> didn&rsquo;t help either</li></ul><p>Given the severity, we <strong>rolled OLAP-Green back to v451</strong>. We would identify the root cause before redeploying.</p><hr><h2 class="relative group">Binary Searching for the Root Cause<div id=binary-searching-for-the-root-cause class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#binary-searching-for-the-root-cause aria-label=Anchor>#</a></span></h2><p>This issue had never been reported in the community. We had to find it ourselves.</p><p>Between v451 and v476, there were extensive changes to the metastore and Hive connector. Scanning release notes alone wouldn&rsquo;t identify the cause. We took a binary search approach.</p><p>We created a test notebook in Zeppelin to systematically check reproduction on each version.</p><div class=highlight-wrapper><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>v451 — OK
</span></span><span class=line><span class=cl>  ↓ (test midpoint)
</span></span><span class=line><span class=cl>v463 — OK
</span></span><span class=line><span class=cl>  ↓
</span></span><span class=line><span class=cl>v469 — Reproduces!
</span></span><span class=line><span class=cl>  ↓ (narrow range)
</span></span><span class=line><span class=cl>v466 — OK
</span></span><span class=line><span class=cl>v467 — OK
</span></span><span class=line><span class=cl>v468 — OK
</span></span><span class=line><span class=cl>v469 — Reproduces!</span></span></code></pre></div></div><p><strong>The regression started at v469.</strong></p><p>Next was identifying which commit within v469 caused it. We reviewed v469&rsquo;s release notes for Hive connector changes, then reverted each related PR one at a time, testing reproduction after each revert.</p><hr><h2 class="relative group">Root Cause: Parquet Footer Optimization Meets Legacy pyarrow<div id=root-cause-parquet-footer-optimization-meets-legacy-pyarrow class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#root-cause-parquet-footer-optimization-meets-legacy-pyarrow aria-label=Anchor>#</a></span></h2><p>The culprit was a Parquet footer parsing optimization PR merged in v469. This PR trusted the <code>RowGroup.getFile_offset</code> value in Parquet file footer metadata and used it to optimize read ranges.</p><p>The problem: not all Parquet files have accurate row group offsets. The affected files were written by pyarrow v5.0.0 (parquet-cpp-arrow v5.0.0, via pandas). This legacy version recorded inaccurate row group offsets.</p><p>Additional testing confirmed:</p><ul><li>Files written by current pyarrow versions were not affected</li><li>The offset error only manifested when row groups exceeded a certain size. Small files didn&rsquo;t reproduce</li><li>Pre-v469 Trino didn&rsquo;t use <code>getFile_offset</code>, so inaccurate offsets were harmless</li></ul><hr><h2 class="relative group">Community Report and One-Day Fix<div id=community-report-and-one-day-fix class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#community-report-and-one-day-fix aria-label=Anchor>#</a></span></h2><p>We organized our findings — the causal PR, reproduction steps, and the specific file characteristics (legacy pyarrow version, row group size threshold) — and shared them in the Trino community Slack. We also filed an issue titled &ldquo;Incorrect results on parquet files written by parquet-cpp-arrow version 5.0.0.&rdquo;</p><p>The original optimization PR author identified the root cause immediately. The optimization assumed <code>RowGroup.getFile_offset</code> was always accurate, but legacy writers could produce incorrect values.</p><p>The fix: use the first page offset from <code>ColumnChunk</code> instead of <code>RowGroup.getFile_offset</code>, adding defensive logic for files with inaccurate offset metadata. The fix PR appeared within a day of our report and was merged for v477.</p><p>We cherry-picked the fix into our fork, deployed to staging to verify, and applied it to production.</p><hr><h2 class="relative group">Redeployment and Results<div id=redeployment-and-results class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#redeployment-and-results aria-label=Anchor>#</a></span></h2><p>With both issues resolved, we resumed the rollout.</p><table><thead><tr><th>Date</th><th>Cluster</th><th>Action</th></tr></thead><tbody><tr><td>June 23</td><td>OLAP-Green</td><td>Initial v476 deploy → issues found, rolled back</td></tr><tr><td>June 26 AM</td><td>OLAP-Green</td><td>Redeployed with fixes</td></tr><tr><td>June 26 PM</td><td>OLAP-Blue</td><td>v476 deployed</td></tr></tbody></table><p>The BI cluster group was split into a separate ticket — deploying on Friday would mean weekend incident response risk. BI deployment proceeded the following Monday.</p><p>Post-deployment monitoring showed no issues with cluster health or query failure metrics. No additional user reports came in.</p><p>While the observation period was still short, the v476-deployed cluster showed relatively higher query throughput. With both clusters at nearly identical worker counts and the gateway routing based on running query count, this means v476 was handling more queries with lower load. It&rsquo;s possible that heavy queries happened to land on the other cluster, but the data suggests genuine performance improvement in the new version.</p><hr><h2 class="relative group">Takeaways<div id=takeaways class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#takeaways aria-label=Anchor>#</a></span></h2><p><strong>Without Blue/Green, this would have been a production incident.</strong> Deploying to one cluster first meant we could discover regressions and immediately roll back while routing traffic to the other side. For a 25-version jump, Blue/Green isn&rsquo;t optional — it&rsquo;s essential.</p><p><strong>Binary search is the go-to for regression debugging.</strong> Reviewing changes across 25 versions individually isn&rsquo;t feasible. Testing reproduction at midpoints narrows the range by half each time. Five or six tests are enough to pinpoint the version. From there, reverting individual commits within that version identifies the exact PR.</p><p><strong>A well-structured issue report gets fast results.</strong> We shared the causal PR, reproduction steps, and specific conditions (legacy pyarrow version, row group size threshold). The original PR author identified the root cause and submitted a fix within a day. Filing &ldquo;it doesn&rsquo;t work&rdquo; versus sharing root cause analysis makes an enormous difference in response time.</p><p><strong>Watch for experimental features enabled by default.</strong> <code>ThreadPerDriverTaskExecutor</code> caused issues in v451 and was still default-enabled in v476. The community issue remains open. Always check release notes for experimental feature changes during upgrades.</p><p><strong>Turn upgrade lessons into a checklist.</strong> We had prepared mitigations for two v451 issues (worker stuck, partition pruning regression) in advance, which made this upgrade smoother. Recording issues and mitigations from each upgrade pays off for the next one.</p><p><strong>References:</strong></p><ul><li><a href=https://trino.io/docs/current/release/release-475.html target=_blank rel=noreferrer>Trino v475 Release Notes</a></li><li><a href=https://trino.io/docs/current/release/release-476.html target=_blank rel=noreferrer>Trino v476 Release Notes</a></li><li><a href=https://github.com/trinodb/trino/pull/25815 target=_blank rel=noreferrer>Require Java 24 (v476)</a></li><li><a href=https://github.com/trinodb/trino/pull/23432 target=_blank rel=noreferrer>Add partitioning push down (v468)</a></li><li><a href=https://github.com/trinodb/trino/pull/22675 target=_blank rel=noreferrer>Add Apache Ranger authorizer plugin</a></li><li><a href=https://trino.io/docs/current/object-storage/alluxio.html target=_blank rel=noreferrer>Alluxio file system support</a></li><li><a href=https://github.com/trinodb/trino/pull/24815 target=_blank rel=noreferrer>Add read support for S3 Tables in Iceberg (v471)</a></li><li><a href=https://github.com/trinodb/trino/issues/21512 target=_blank rel=noreferrer>ThreadPerDriverTaskExecutor issue</a></li><li><a href=https://github.com/trinodb/trino/issues/22268 target=_blank rel=noreferrer>Partition pruning regression</a></li><li><a href=https://github.com/trinodb/trino/pull/22987 target=_blank rel=noreferrer>Escape hatch for unsafe pushdowns</a></li><li><a href=https://github.com/trinodb/trino/pull/26051 target=_blank rel=noreferrer>MV refresh revert PR</a></li><li><a href=https://github.com/trinodb/trino/pull/24618 target=_blank rel=noreferrer>Parquet footer optimization (v469, regression cause)</a></li><li><a href=https://github.com/trinodb/trino/issues/26058 target=_blank rel=noreferrer>Parquet file_offset issue report</a></li><li><a href=https://github.com/trinodb/trino/pull/26064 target=_blank rel=noreferrer>Parquet fix PR (v477)</a></li></ul></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://nanta-data.dev/en/posts/trino-v476-upgrade/&amp;title=Trino%20v451%20to%20v476:%20Upgrading%20a%20Production%20Cluster%20Across%2025%20Versions" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://nanta-data.dev/en/posts/trino-v476-upgrade/&amp;resubmit=true&amp;title=Trino%20v451%20to%20v476:%20Upgrading%20a%20Production%20Cluster%20Across%2025%20Versions" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://nanta-data.dev/en/posts/trino-v476-upgrade/&amp;subject=Trino%20v451%20to%20v476:%20Upgrading%20a%20Production%20Cluster%20Across%2025%20Versions" title="Send via email" aria-label="Send via email"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a></section></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span class="flex flex-col"><a class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/en/posts/alb-log-collection-system/><span class=leading-6><span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Building an ALB Log Pipeline with Filebeat, Flink, and Iceberg
</span></a><span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2026-02-25T00:00:00+00:00>25 February 2026</time>
</span></span><span class="flex flex-col items-end"><a class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/en/posts/trino-alluxio-cache-poc/><span class=leading-6>Trino Alluxio Cache PoC: EBS Throughput Was the Bottleneck&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
</span></a><span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2026-02-27T00:00:00+00:00>27 February 2026</time></span></span></div></div></footer></article><div id=scroll-to-top class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200"><a href=#the-top class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between text-sm text-neutral-500 dark:text-neutral-400"><nav><ul class="flex list-none flex-row"><li class="me-4 last:me-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/en/privacy-policy/ title="Privacy Policy">Privacy Policy</a></li></ul></nav><p>&copy;
2026
nanta</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500" data-url=https://nanta-data.dev/en/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>